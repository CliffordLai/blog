Source code for my [On Incomplete HTTP Reads and the Requests Library In Python](https://blog.petrzemek.net/2018/04/22/on-incomplete-http-reads-and-the-requests-library-in-python) English blog post.

The code is divided into two parts:
* [servers](https://github.com/s3rvac/blog/tree/master/en-2018-04-22-on-incomplete-http-reads-and-the-requests-library-in-python/servers): Three HTTP servers, each behaving in a slightly different way:
    * [`content-length.py`](https://github.com/s3rvac/blog/tree/master/en-2018-04-22-on-incomplete-http-reads-and-the-requests-library-in-python/servers/content-length.py): An HTTP server that returns fewer bytes in the body of the response than stated in the `Content-Length` header.
    * [`content-encoding-gzip.py`](https://github.com/s3rvac/blog/tree/master/en-2018-04-22-on-incomplete-http-reads-and-the-requests-library-in-python/servers/content-encoding-gzip.py): An HTTP server that returns fewer bytes in the body of a gzipped response than stated in the `Content-Length` header.
    * [`transfer-encoding-chunked.py`](https://github.com/s3rvac/blog/tree/master/en-2018-04-22-on-incomplete-http-reads-and-the-requests-library-in-python/servers/transfer-encoding-chunked.py): An HTTP server that returns fewer bytes in the body of the response than stated in the chunk size when using `Transfer-Encoding: Chunked`.
* [clients](https://github.com/s3rvac/blog/tree/master/en-2018-04-22-on-incomplete-http-reads-and-the-requests-library-in-python/clients): Several HTTP clients verifying the behavior of [requests](https://github.com/requests/requests) for Python and [reqwest](https://github.com/seanmonstar/reqwest) for Rust:
    * [`python/client.py`](https://github.com/s3rvac/blog/tree/master/en-2018-04-22-on-incomplete-http-reads-and-the-requests-library-in-python/clients/python/client.py): An HTTP client that does not check that the content of the response has at least `Content-Length` bytes.
    * [`python/client-with-check.py`](https://github.com/s3rvac/blog/tree/master/en-2018-04-22-on-incomplete-http-reads-and-the-requests-library-in-python/clients/python/client-with-check.py): An HTTP client that checks that the content of the response has at least `Content-Length` bytes.
    * [`rust`](https://github.com/s3rvac/blog/tree/master/en-2018-04-22-on-incomplete-http-reads-and-the-requests-library-in-python/clients/rust): An HTTP client in Rust for verifying the reading of incomplete responses.
